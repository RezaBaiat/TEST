<!DOCTYPE html>

<html>
<head>
  <title>BaseComponent.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="..\..\..\..\docco.css" />
</head>
<body>
  <div class="container">
    
      <div class="toc">
        <h3>Table of Contents</h3>
        <ul>
          
          
          
            
            
            
            
            <li class="indent0">
              <a class="source" href="..\..\..\..\README.html">
                README.md
              </a>
            </li>
          
            
            
            
              
              
                
                  <h4 class="indent0">src/</h4>
                
              
                
                  <h4 class="indent1">app/</h4>
                
              
                
                  <h4 class="indent2">components/</h4>
                
              
                
                  <h4 class="indent3">appbutton/</h4>
                
              
              
            
            
            <li class="indent4">
              <a class="source" href="..\..\components\appbutton\AppButton.html">
                AppButton.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
              
                
              
                
                  <h4 class="indent3">appimageview/</h4>
                
              
              
            
            
            <li class="indent4">
              <a class="source" href="..\..\components\appimageview\AppImageView.html">
                AppImageView.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
              
                
              
                
                  <h4 class="indent3">apptextview/</h4>
                
              
              
            
            
            <li class="indent4">
              <a class="source" href="..\..\components\apptextview\AppTextView.html">
                AppTextView.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
              
                
              
                
                  <h4 class="indent3">apptouchable/</h4>
                
              
              
            
            
            <li class="indent4">
              <a class="source" href="..\..\components\apptouchable\AppTouchable.html">
                AppTouchable.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
              
                
                  <h4 class="indent2">scenes/</h4>
                
              
                
                  <h4 class="indent3">general/</h4>
                
              
              
            
            
            <li class="indent4">
              <a class="source" href="BaseComponent.html">
                BaseComponent.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
              
                
              
                
                  <h4 class="indent3">screen1/</h4>
                
              
              
            
            
            <li class="indent4">
              <a class="source" href="..\screen1\Screen1.html">
                Screen1.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent4">
              <a class="source" href="..\screen1\Styles.html">
                Styles.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
              
                
              
                
                  <h4 class="indent3">screen2/</h4>
                
              
              
            
            
            <li class="indent4">
              <a class="source" href="..\screen2\Screen2.html">
                Screen2.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent4">
              <a class="source" href="..\screen2\Styles.html">
                Styles.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
                  <h4 class="indent1">assets/</h4>
                
              
                
                  <h4 class="indent2">styles/</h4>
                
              
              
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\assets\styles\App.html">
                App.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\assets\styles\Base.html">
                Base.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\assets\styles\Constants.html">
                Constants.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
                  <h4 class="indent1">configs/</h4>
                
              
              
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\configs\Application.html">
                Application.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\configs\LocalNotifications.html">
                LocalNotifications.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\configs\Locale.html">
                Locale.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\configs\Permission.html">
                Permission.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\configs\PushNotifications.html">
                PushNotifications.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
              
                
                  <h4 class="indent2">network/</h4>
                
              
              
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\configs\network\Gateway.html">
                Gateway.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\configs\network\Health.html">
                Health.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\configs\network\Security.html">
                Security.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\configs\network\Socket.html">
                Socket.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
              
                
                  <h4 class="indent2">redux/</h4>
                
              
              
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\configs\redux\Store.html">
                Store.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
                  <h4 class="indent1">helpers/</h4>
                
              
              
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\helpers\Logger.html">
                Logger.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
                  <h4 class="indent1">notifications/</h4>
                
              
              
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\notifications\GeneralPushNotificationHandler.html">
                GeneralPushNotificationHandler.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\notifications\LocalNotificationsHandler.html">
                LocalNotificationsHandler.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\notifications\PushNotificationListenerInterface.html">
                PushNotificationListenerInterface.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
                  <h4 class="indent1">permissions/</h4>
                
              
              
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\permissions\PermissionsHandler.html">
                PermissionsHandler.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
                  <h4 class="indent1">redux/</h4>
                
              
                
                  <h4 class="indent2">general/</h4>
                
              
              
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\redux\general\GlobalActions.html">
                GlobalActions.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\redux\general\GlobalConstants.html">
                GlobalConstants.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\redux\general\GlobalReducer.html">
                GlobalReducer.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\redux\general\GlobalSaga.html">
                GlobalSaga.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent3">
              <a class="source" href="..\..\..\redux\general\GlobalSelectors.html">
                GlobalSelectors.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
                  <h4 class="indent1">resources/</h4>
                
              
              
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\resources\Animations.html">
                Animations.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\resources\Colors.html">
                Colors.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\resources\Images.html">
                Images.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\resources\R.html">
                R.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\resources\Strings.html">
                Strings.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
                  <h4 class="indent1">routes/</h4>
                
              
              
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\routes\AppNavigator.html">
                AppNavigator.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\routes\Routes.html">
                Routes.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
                  <h4 class="indent1">services/</h4>
                
              
              
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\services\GeneralService.html">
                GeneralService.js
              </a>
            </li>
          
            
            
            
              
              
                
              
                
                  <h4 class="indent1">socket/</h4>
                
              
              
            
            
            <li class="indent2">
              <a class="source" href="..\..\..\socket\SocketListener.html">
                SocketListener.js
              </a>
            </li>
          
            
            
            
              
              
                
                  <h4 class="indent0">test/</h4>
                
              
              
            
            
            <li class="indent1">
              <a class="source" href="..\..\..\..\test\App.test.html">
                App.test.js
              </a>
            </li>
          
            
            
            
            
            <li class="indent1">
              <a class="source" href="..\..\..\..\test\HOWTO.html">
                HOWTO.md
              </a>
            </li>
          
        </ul>
      </div>
    
    <div class="page">
      <div class="header">
        
          <h1>BaseComponent.js</h1>
        
      </div>

      
        
        <p>All scenes (screens) should extend this component,
they can use multiple valuable work arounds who are already done in this file
including redux’s createCompose ,getString, onResume, onPause and…</p>

        
          <div class='highlight'><pre><span class="hljs-keyword">import</span> {
  AppState, AppStateStatus, EmitterSubscription, ViewStyle,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> { Navigation } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native-navigation'</span>;
<span class="hljs-keyword">import</span> SmartComponent <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native-dev-kit/src/ui/SmartComponent'</span>;
<span class="hljs-keyword">import</span> { compose } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;
<span class="hljs-keyword">import</span> {
  injectIntl, intlShape, IntlProvider, addLocaleData,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-intl'</span>;
<span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-keyword">import</span> { InitialState } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../redux/general/GlobalReducer'</span>;
<span class="hljs-keyword">import</span> AppNavigator <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../routes/AppNavigator'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> actions <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../redux/general/GlobalActions'</span>;

<span class="hljs-keyword">export</span> interface BaseComponentProps {
  componentId? : string,
  style? : ViewStyle
}</pre></div>
        
      
        
        <p>every screen should extend this class</p>

        
          <div class='highlight'><pre>export class BaseComponent&lt;P : BaseComponentProps&gt; extends SmartComponent&lt;P&gt; {

  appearListener : EmitterSubscription;

  disapearListener : EmitterSubscription;

  mActivityState = 'not-set';

  componentDidMount() {
    AppState.addEventListener('change', this._handleAppStateChange);
    this.appearListener = Navigation.events().registerComponentDidAppearListener((event) =&gt; {
      if (event.componentId === this.props.componentId) {
        this.callResumeIfNeeded();
      }
    });
    this.disapearListener = Navigation.events().registerComponentDidDisappearListener((event) =&gt; {
      if (event.componentId === this.props.componentId) {
        this.callPauseIfNeeded();
      }
    });
    this.callResumeIfNeeded();
  }

  getString(key : string) : string {
    return this.props.intl.messages[key];
  }

  componentWillUnmount() {
    AppState.removeEventListener('change', this._handleAppStateChange);
    this.appearListener &amp;&amp; this.appearListener.remove();
    this.disapearListener &amp;&amp; this.disapearListener.remove();
    this.callPauseIfNeeded();
  }

  callPauseIfNeeded() {
    if (this.mActivityState === 'paused') {
      return;
    }
    this.mActivityState = 'paused';
    this.onPause();
  }

  callResumeIfNeeded() {
    if (this.mActivityState === 'resumed') {
      return;
    }
    this.mActivityState = 'resumed';
    this.onResume();
  }</pre></div>
        
      
        
        <p>called when component first created or has returned from background</p>

        
          <div class='highlight'><pre>  onResume() {}</pre></div>
        
      
        
        <p>called when component has gone to background and is not visible</p>

        
          <div class='highlight'><pre>  onPause() {}

  _handleAppStateChange = <span class="hljs-function">(<span class="hljs-params">nextAppState : AppStateStatus</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (AppNavigator.getTopScreenId() == <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (nextAppState === <span class="hljs-string">'active'</span>) {
      <span class="hljs-keyword">if</span> (AppNavigator.getTopScreenId() === <span class="hljs-keyword">this</span>.props.componentId) {
        <span class="hljs-keyword">this</span>.callResumeIfNeeded();
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nextAppState === <span class="hljs-string">'background'</span>) {
      <span class="hljs-keyword">if</span> (AppNavigator.getTopScreenId() === <span class="hljs-keyword">this</span>.props.componentId) {
        <span class="hljs-keyword">this</span>.callPauseIfNeeded();
      }
    } <span class="hljs-keyword">else</span> {</pre></div>
        
      
        
        <p>alert(<code>EVENT = ${nextAppState}</code>);</p>

        
          <div class='highlight'><pre>    }

  };

}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapDispatchToProps</span>(<span class="hljs-params">dispatch</span>) </span>{
  <span class="hljs-keyword">return</span> { ...actions, dispatch };
}</pre></div>
        
      
        
        <p>use this function inside scenes instead of using connect() , this makes it alot easier
this also enables IDE to detect state types , preventing typo and enabled code completion</p>

        
          <div class='highlight'><pre><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createCompose</span>(<span class="hljs-params">mapStateToProps : (state : {rootReducer : InitialState}</span>)=&gt;</span>{}) {
  <span class="hljs-keyword">const</span> withConnect = connect(mapStateToProps, mapDispatchToProps);
  <span class="hljs-keyword">return</span> compose(
    withConnect,
    injectIntl,
  );
}</pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>